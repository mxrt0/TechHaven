@model AdminDashboardViewModel
@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="dashboard-container">
    <header class="mb-5 text-center">
        <h2 class="neon-title">Admin Dashboard</h2>
        <div class="neon-line mx-auto"></div>
    </header>

    <div class="row g-4">
        <div class="col-6 col-md-3">
            <div class="neon-card accent-blue">
                <div class="card-content">
                    <span class="stat-label">Total Products</span>
                    <h3 class="stat-value">@Model.TotalProducts</h3>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="neon-card accent-green">
                <div class="card-content">
                    <span class="stat-label">Active Products</span>
                    <h3 class="stat-value">@Model.ActiveProducts</h3>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="neon-card accent-purple">
                <div class="card-content">
                    <span class="stat-label">Total Orders</span>
                    <h3 class="stat-value">@Model.TotalOrders</h3>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="neon-card accent-amber">
                <div class="card-content">
                    <span class="stat-label">Low Stock</span>
                    <h3 class="stat-value">@Model.LowStockProducts.Count</h3>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5 g-4">
        <div class="col-12 col-lg-6">
            <div class="data-panel">
                <h4 class="panel-header">Recent Orders</h4>
                <div class="table-container">
                    @if (!Model.RecentOrders.Any())
                    {
                        <p class="empty-state">No recent orders found.</p>
                    }
                    else
                    {
                        <table class="neon-table">
                            <thead>
                                <tr>
                                    <th>Order #</th>
                                    <th>Date</th>
                                    <th>Total</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var order in Model.RecentOrders)
                                {
                                    <tr>
                                        <td>@order.OrderNumber</td>
                                        <td>@order.OrderDate.ToString("dd/MM/yyyy HH:mm", CultureInfo.InvariantCulture)</td>
                                        <td class="text-accent">@order.OrderTotal.ToString("0.00") €</td>
                                        <td>
                                            <div class="neon-btn btn-sm">
                                                <a asp-area="Admin" asp-controller="Orders" asp-action="Details" asp-route-id="@order.OrderId" class="neon-btn btn-sm">View</a>
                                            </div>                                            
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-6">
            <div class="data-panel">
                <h4 class="panel-header">Low Stock Products</h4>
                <div class="table-container">
                    @if (!Model.LowStockProducts.Any())
                    {
                        <p class="empty-state">Inventory is healthy.</p>
                    }
                    else
                    {
                        <table class="neon-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Stock</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var product in Model.LowStockProducts)
                                {
                                    <tr>
                                        <td>@product.Name</td>
                                        <td class="text-warning fw-bold">@product.StockQuantity</td>
                                        <td>
                                            <div class="neon-btn btn-sm">
                                                <a asp-area="Admin" asp-controller="Products" asp-action="Edit" asp-route-id="@product.Id" class="neon-btn btn-amber btn-sm">Edit</a>
                                            </div>
                                            
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="dashboard-actions mt-5">
        <div class="neon-btn">
            <a asp-area="Admin" asp-controller="Products" asp-action="Index">Manage Products</a>
        </div>
        <div class="neon-btn">
            <a asp-area="Admin" asp-controller="Orders" asp-action="Index" class="neon-btn">Manage Orders</a>
        </div>       
    </div>
</div>